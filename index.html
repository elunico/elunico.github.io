<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="style.css" />
    <title>eluni.co</title>
  </head>
  <body>
    <h1>Welcome...</h1>
    <p>This site is pending. Please come back soon...</p>
  </body>

  <script>
    function checkKonamiCode(history) {
      console.log(history.join(""));

      if (
        history
          .join("")
          .toLocaleLowerCase()
          .endsWith(
            "arrowuparrowuparrowdownarrowdownarrowleftarrowrightarrowleftarrowrightba"
          )
      ) {
        document.location.href = "https://en.wikipedia.org/wiki/Konami_Code";
      }

      if (history.length >= 10) {
        history.shift();
      }
    }

    let title = document.querySelector("h1");
    let text = document.querySelector("p");

    document.onreadystatechange = function () {
      if (document.readyState === "complete") {
        title.style.opacity = 1;
        setTimeout(() => {
          text.style.opacity = 1;
        }, 800);
      }
    };

    let keyHistory = [];
    document.addEventListener("keydown", function (event) {
      keyHistory.push(event.key);

      checkKonamiCode(keyHistory);
    });

    let startY = null;
    let startX = null;
    let touchStartTime = null;
    document.addEventListener("touchstart", function (event) {
      startY = event.touches[0].clientY;
      startX = event.touches[0].clientX;
      let currentTime = new Date().getTime();
      if (touchStartTime && currentTime - touchStartTime < 200) {
        keyHistory.push("ba");
        checkKonamiCode(keyHistory);
      }
      touchStartTime = new Date().getTime();
    });

    document.addEventListener("touchmove", function (event) {
      if (startY === null && startX === null) {
        return;
      }

      let currentY = event.touches[0].clientY;
      let diffY = startY - currentY;

      let currentX = event.touches[0].clientX;
      let diffX = startX - currentX;

      if (diffY > 0 && diffX < 30) {
        keyHistory.push("arrowup");
      } else if (diffY < 0 && diffX < 30) {
        keyHistory.push("arrowdown");
      }

      if (diffX > 0 && diffY < 30) {
        keyHistory.push("arrowleft");
      } else if (diffX < 0 && diffY < 30) {
        keyHistory.push("arrowright");
      }

      startX = null;
      startY = null;
      checkKonamiCode(keyHistory);
    });
  </script>
</html>
